# CoachSearching.com - Comprehensive TODO List

**Created:** 2025-12-09 19:01 UTC
**Status:** Production Readiness Roadmap
**Branch:** `claude/codebase-audit-upgrade-01GojwRr4s8wEVFuNiNK3t1f`

---

## Overview

This document tracks all remaining work needed to bring CoachSearching.com to full production readiness. Items are organized by priority and category.

---

## Priority 1: Critical (Do First)

### 1.1 SEO & Routing
> **Note:** Site is hosted on GitHub Pages (static only). Hash routing is REQUIRED
> unless migrating to a different host. .htaccess does NOT work on GitHub Pages.

- [x] **Hash-based routing** - Working correctly for GitHub Pages
- [ ] **For clean URLs, migrate hosting** (optional, only if SEO critical)
  - Options:
    - A) Vercel/Netlify (free, supports redirects)
    - B) Keep GitHub Pages + accept hash URLs
  - Decision needed: Is clean URL SEO worth migration effort?

- [ ] **Implement proper meta tags per page**
  - Dynamic title, description, og:tags for each route
  - Coach profile pages need individual meta data

- [ ] **Add structured data (JSON-LD)**
  - Person schema for coaches
  - Service schema for coaching offerings
  - Review schema for testimonials

### 1.2 Error Monitoring
- [ ] **Set up error tracking service**
  - Recommended: Sentry (free tier available)
  - Frontend JS error capture
  - PHP error logging
  - Alert notifications for critical errors

- [ ] **Implement proper error logging in PHP**
  - Centralized error handler
  - Log to file with rotation
  - Don't expose stack traces to users

---

## Priority 2: High (Security & Stability)

### 2.1 API Security Hardening
- [ ] **Add rate limiting to API endpoints**
  - Protect against brute force and abuse
  - Implement per-IP limits (e.g., 100 req/min)
  - Options: PHP middleware, Cloudflare, nginx config

- [ ] **Verify JWT signatures in PHP**
  - Currently: JWT decoded without verification
  - Risk: Relies entirely on Supabase RLS
  - Solution: Verify using Supabase JWT secret
  - File: `api/lib/Database.php`

- [ ] **Add input validation layer**
  - Sanitize all user inputs
  - Validate data types, lengths, formats
  - Prevent injection attacks

- [ ] **Implement CSRF protection**
  - Add CSRF tokens for state-changing operations
  - Especially for booking and payment flows

### 2.2 Payment Security
- [ ] **Add idempotency keys to Stripe calls**
  - Prevent duplicate charges on retry
  - Critical for booking creation

- [ ] **Implement payment webhook retry handling**
  - Handle duplicate webhook deliveries
  - Store processed event IDs

- [ ] **Add Stripe webhook endpoint monitoring**
  - Alert if webhooks stop arriving
  - Monitor for signature failures

---

## Priority 3: Medium (User Experience & Performance)

### 3.1 Frontend Build Process
- [ ] **Evaluate build tooling options**
  - Current: No build, CDN-loaded React
  - Options:
    - A) Add Vite (minimal change, big benefit)
    - B) Full framework migration (Next.js)
  - Benefits: Bundling, minification, tree-shaking

- [ ] **Implement code splitting**
  - Lazy load routes/components
  - Reduce initial bundle size

- [ ] **Add asset optimization**
  - Image compression and lazy loading
  - CSS minification
  - Font optimization

### 3.2 Performance Optimization
- [ ] **Add caching layer**
  - Cache coach listings (5-10 min TTL)
  - Cache static content
  - Consider Redis for session/API caching

- [ ] **Optimize database queries**
  - Review slow queries
  - Add indexes where needed
  - Implement pagination everywhere

- [ ] **Add CDN for static assets**
  - Images, CSS, JS
  - Consider Cloudflare or similar

### 3.3 User Experience
- [ ] **Improve loading states**
  - Skeleton loaders instead of spinners
  - Optimistic updates where appropriate

- [ ] **Add offline handling**
  - Graceful degradation
  - Clear error messages

- [ ] **Implement proper form validation**
  - Real-time validation feedback
  - Clear error messages
  - Accessibility (ARIA labels)

---

## Priority 4: Important (Testing & CI/CD)

### 4.1 Testing Infrastructure
- [ ] **Set up PHP unit testing**
  - PHPUnit configuration
  - Test critical API endpoints
  - Test payment flows (mock Stripe)

- [ ] **Add frontend testing**
  - Jest for unit tests
  - Cypress or Playwright for E2E
  - Test booking flow end-to-end

- [ ] **Create test database/environment**
  - Separate Supabase project for testing
  - Seed data scripts

### 4.2 CI/CD Pipeline
- [ ] **Set up GitHub Actions**
  - Run tests on PR
  - Lint checking
  - Build verification

- [ ] **Implement staging environment**
  - Deploy PRs to preview URLs
  - Test before production

- [ ] **Automate deployments**
  - Deploy on merge to main
  - Rollback capability

---

## Priority 5: Nice to Have (Future Enhancements)

### 5.1 Analytics & Insights
- [ ] **Implement comprehensive analytics**
  - User journey tracking
  - Conversion funnel analysis
  - Coach performance metrics

- [ ] **Add admin dashboard**
  - Platform statistics
  - Revenue tracking
  - User management

### 5.2 Feature Enhancements
- [ ] **Implement real-time notifications**
  - Booking confirmations
  - Message alerts
  - Review requests

- [ ] **Add coach availability calendar**
  - Visual availability picker
  - Timezone handling
  - Google Calendar sync

- [ ] **Implement messaging system**
  - Pre-booking inquiries
  - Post-session follow-up
  - File sharing

### 5.3 Code Quality
- [ ] **Standardize PHP code style**
  - PSR-12 compliance
  - PHP-CS-Fixer configuration

- [ ] **Improve frontend architecture**
  - Consistent state management
  - Component library documentation
  - TypeScript migration (optional)

- [ ] **Add API documentation**
  - OpenAPI/Swagger spec
  - Auto-generated docs
  - Example requests/responses

---

## Completed Items âœ…

### Security (Phase 4 - Dec 2025)
- [x] Fix CORS wildcard vulnerability
- [x] Enable Stripe webhook signature verification
- [x] Add security headers (X-Frame-Options, etc.)
- [x] Fix undefined $supabase global in bookings.php
- [x] Implement real auth endpoints
- [x] Fix search endpoint with real data

### Documentation (Phase 2 - Dec 2025)
- [x] Create CODEBASE_AUDIT.md
- [x] Create ARCHITECTURE.md
- [x] Create FEATURES.md
- [x] Create AI_DEVELOPMENT_GUIDE.md
- [x] Create MASTER_PLAN.md
- [x] Create PRODUCTION_CHECKLIST.md
- [x] Update README.md

### Cleanup (Dec 2025)
- [x] Archive old backup files
- [x] Archive diagnostic SQL scripts
- [x] Archive old session notes
- [x] Clean up root directory

---

## Decision Log

| Date | Decision | Rationale |
|------|----------|-----------|
| 2025-12-09 | Keep current frontend architecture for now | Full framework migration is high effort; focus on critical fixes first |
| 2025-12-09 | Prioritize SEO over build tooling | Discoverability is more critical for marketplace growth |
| 2025-12-09 | Use manual JWT verification over SDK | Keeps dependencies minimal, PHP native functions sufficient |

---

## Notes

- All API endpoints are in `/api/endpoints/`
- Database class at `/api/lib/Database.php`
- Frontend entry point at `/js/app.js`
- Main schema at `/schema.sql`

---

## How to Use This Document

1. Pick items from highest priority first
2. Mark items `[x]` when completed
3. Add completion date in parentheses
4. Move to "Completed Items" section
5. Update Decision Log for significant choices

---

*Last Updated: 2025-12-09*
